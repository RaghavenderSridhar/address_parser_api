###to tar a directory

sudo tar cvfz address_parser_compiled.tar.gz libpostal/


####split the files into multiple

split -b 100000 parser.tar.gz

##creating docker image

sudo docker build -t addressparserswagger -f Dockerfile .

###running a container

sudo docker run --name addressparserapicontainertest -d -p 8080:8080 4ea9a8b12bfb

sudo docker run -d --name testcontainer test

### to list all the container both started and stopped

docker ps -a 

#### stop and all docker containers

sudo docker container stop $(sudo docker container ls -aq)

### remove all docker containers

sudo docker container rm $(sudo docker container ls -aq)

### going insde bash

sudo docker exec -it addressparserapicontainer bash

### removing docker image
sudo docker rmi test:latest
sudo docker rmi bardock123/addressparser:latest
sudo docker rmi bardock123/addressparser:firstimagepush

###stoping all docker containers
sudo docker stop $(sudo docker ps -a -q)

###removing all docker images

sudo docker rmi $(sudo docker images -a -q)

####docker logs

sudo docker logs --since=1h d97db4094e00

###remove dangling docker images
sudo docker rmi $(docker images --filter "dangling=true" -q --no-trunc)

####testing api 
http://172.17.0.2:8080/api/v1/addressparser/"The Book Club 100-106 Leonard St, Shoreditch, London, Greater London, EC2A 4RH, United Kingdom"

curl -d "address=The Book Club 100-106 Leonard St, Shoreditch, London, Greater London, EC2A 4RH, United Kingdom" -X POST http://172.17.0.2:8080/api/v1/addressparser/

data = {'address': ""The Book Club 100-106 Leonard St, Shoreditch, London, Greater London, EC2A 4RH, United Kingdom""}


import requests

url = "http://172.17.0.2:8080/api/v1/addressparser"

payload={'address': '"plot number 242, new vasavi nagar, secunderabad, hyderabad, india 500015"'}


"4a vijay society, kansari khambhat, anand, gujrat, 388630"


headers = {}

response = requests.request("POST", url, headers=headers, data=payload, files=files)
response = requests.request("POST", url,data=payload)

requests.post(url,data=payload).text


print(response.text)


curl --data "4a vijay society, kansari khambhat, anand, gujrat, 388630"  http://172.17.0.2:8080/api/v1/addressparser

###docker pushing

docker tag addressparser:latest bardock123/dockerhub:address

docker push bardock123/dockerhub:addressparser

